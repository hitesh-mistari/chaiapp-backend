{
  "meta": {
    "project": "ChaiTapri",
    "date": "2025-12-30",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "ChaiTapri is a mobile-first digital Khata (ledger) and Point-of-Sale (POS) system designed specifically for small tea and coffee vendors in India. It digitizes traditional credit operations, enabling vendors to quickly log sales, manage customer balances, accept digital payments, and expand their user base via an affiliate program.",
  "core_goals": [
    "Digitize traditional paper-based ledgers into a streamlined mobile-friendly digital system.",
    "Enable fast, one-tap logging of daily tea and coffee consumption to support high customer volume during peak hours.",
    "Provide transparent real-time access to customer dues and payment history via public links.",
    "Incentivize growth and onboarding through a referral-based affiliate system."
  ],
  "key_features": [
    "Authentication with Google Sign-In, Guest Mode, and Email/Password fallback, including automatic Store creation on registration.",
    "POS Dashboard with large actionable buttons for quick item logging and customer selection, including 'Walk-in' non-registered sales.",
    "Ledger management with real-time balance updates, detailed transaction and payment history, ability to delete logs, and status indicators for due payments.",
    "Public ledger access for customers with secure URLs to view dues and upload payment receipts linking back to vendors.",
    "Affiliate system with unique referral codes, commission tracking dashboard, prevention of self-referrals, and payout request handling.",
    "Store settings configuration including pricing per item, shop profile updates, and notification toggles."
  ],
  "user_flow_summary": [
    "User authentication via Google Sign-In, guest mode, or email/password, leading to automatic store setup.",
    "Vendor accesses the POS dashboard, selects or searches customers, and logs item sales with instant recording of transactions.",
    "Real-time ledger view where vendor or customer reviews balances, transaction logs, and uploads or marks payments.",
    "Customers access their public ledger link to monitor dues and upload payment receipts, triggering vendor notifications.",
    "Affiliates track referral signups and commissions, and vendors request payouts through the affiliate dashboard.",
    "Vendors configure store settings including product prices, UPI details, and notification preferences."
  ],
  "validation_criteria": [
    "All authentication methods must securely verify credentials, create user sessions, and related Store data.",
    "POS item logging and customer selection actions must respond within 200ms and support rapid taps without loss of data.",
    "Ledger balances update accurately and immediately after logs or payments are recorded or deleted.",
    "Public ledger URLs must securely display only the respective customer's records without requiring login.",
    "Affiliate referral codes must be unique, track signups correctly, and prevent self-referrals.",
    "Payout requests validate minimum thresholds and record payment method data accurately.",
    "Store settings changes update promptly and reflect on pricing and notification behavior on the dashboard.",
    "System performance must meet sub-2 second dashboard load time under typical network conditions.",
    "Security requirements including JWT authentication, rate limiting on admin routes, and input validation must be enforced consistently."
  ],
  "code_summary": {
    "tech_stack": [
      "Node.js",
      "Express",
      "TypeScript",
      "PostgreSQL",
      "Google Auth Library"
    ],
    "features": [
      {
        "name": "Auth API",
        "description": "Authentication endpoints for Google Login, Guest Login, and User Management",
        "files": [
          "src/routes/auth.routes.ts",
          "src/services/auth.service.ts"
        ]
      },
      {
        "name": "Customer Management API",
        "description": "CRUD operations for Customers and their Logs/Khata",
        "files": [
          "src/routes/customers.routes.ts"
        ]
      },
      {
        "name": "Payment & Billing API",
        "description": "Payment recording, verification, and Ledger queries",
        "files": [
          "src/routes/customers.routes.ts"
        ]
      },
      {
        "name": "Affiliate API",
        "description": "Affiliate program logic, referral tracking, and payout requests",
        "files": [
          "src/routes/affiliate.routes.ts"
        ]
      },
      {
        "name": "Public Ledger API",
        "description": "Public status checking for customers",
        "files": [
          "src/routes/public.routes.ts"
        ]
      }
    ]
  }
}
